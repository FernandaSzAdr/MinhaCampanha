<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	template="/templates/modeloLogin.xhtml">

	<ui:define name="conteudo">
		<h:form id="formCriacao" >
			<p:panelGrid id="paneLogin1" columns="2" cellpadding="5">
				<p:outputLabel for="cpf" value="CPF:"/>
				<p:inputMask id="cpf" value="#{usuarioPessoaBean.pessoa.cpf}" maxlength="12" size="20" required="true" 
				mask="999.999.999-99" requiredMessage="O campo 'CPF' é obrigatório."/>
				
				<p:outputLabel for="primeiro" value="Primeiro Nome:"/>
				<p:inputText id="primeiro" label="Nome" value="#{usuarioPessoaBean.pessoa.primeiro_nome}" maxlength="50" size="40" 
				required="true"/>
					
				<p:outputLabel for="meio" value="Nome do meio:"/>
				<p:inputText id="meio" label="Nome" value="#{usuarioPessoaBean.pessoa.medio_nome}" maxlength="1" size="40" 
				required="true"/>
					
				<p:outputLabel for="ultimo" value="Ultimo Nome:"/>
				<p:inputText id="ultimo" label="Nome" value="#{usuarioPessoaBean.pessoa.ultimo_nome}" maxlength="50" size="40" 
				required="true"/>
				
				<p:outputLabel for="Nascimento" value="Data de Nascimento:"/>
				<p:inputMask id="Nascimento" value="#{usuarioPessoaBean.pessoa.nascimento} " size="20" mask="99/99/9999" 
				required="true"/>
				
				<p:outputLabel value="Telefone Celular: "/>
				<p:inputMask maxlength="11" mask="(99)99999-9999" size="20" value="#{usuarioPessoaBean.pessoa.telefone1}"/>
				
				<p:outputLabel value="Telefone Fixo: "/>
				<p:inputMask maxlength="10" mask="(99)9999-9999" size="20" value="#{usuarioPessoaBean.pessoa.telefone2}"/>
			</p:panelGrid>
			
			<p:spacer height="5"/>
			<p:separator/>
			
			<p:panelGrid id="panelLogin2" columns="2">
				<p:outputLabel for="usuario" value="Usuario:"/>
				<p:inputText id="usuario" label="Usuario" value="#{usuarioPessoaBean.login.login}" maxlength="30" size="10" 
				required="true"/>
				
				<p:outputLabel for="senha1" value="Senha:"/>
				<p:password id="senha1" label="Senha" value="#{usuarioPessoaBean.login.senha}" maxlength="16" size="10" 
				required="true" match="senha2"/>
				
				<h:outputLabel for="senha2" value="Repita a senha:"/>
				<p:password id="senha2" label="Senha2" maxlength="16" size="10"
				 required="true"/>
				
				<p:outputLabel for="email1" value="Email:"/>
				<p:inputText id="email1" label="Email" value="#{usuarioPessoaBean.usuario.email}" maxlength="100" size="20" required="true" match="email2"/>	
				
				<h:outputLabel for="email2" value="Repita o email:"/>
				<p:inputText id="email2" label="Email2" maxlength="100" size="20" required="true"/>
			</p:panelGrid>
			
			<p:spacer height="5"/>
			<p:separator/>			
	
			<h:panelGrid columns="2">
				<p:commandButton icon="ui-icon-plus" value="Vincular uma instituição" 
				actionListener="#{usuarioPessoaBean.novoInstituicao}" 
				oncomplete="PF('dialogo').show();" update=":formInst:panelInst"/>
				
				<p:commandButton icon="ui-icon-plus" value="Criar Usuário"  
				actionListener="#{usuarioPessoaBean.criarUsuario}"
				update=":mensagem :formCriacao"/>
				
				<p:commandButton value="Voltar" icon="ui-icon-arrowreturn-1-w" action="login?faces-redirect=true"/>
			</h:panelGrid>
		</h:form>
		
		<p:dialog header="Vincular uma instituição" widgetVar="dialogo" draggable="false"
		resizable="false" modal="true" closable="false">
			<h:form id="formInst">
				<h:panelGrid columns="2" id="panelInst">
					<p:outputLabel for="cnpj" value="CNPJ:" />
					<p:inputMask id="cnpj" value="#{usuarioPessoaBean.inst_pessoa.cnpj}" maxlength="18" size="20" 
					mask="99.999.999/9999-99" required="true" requiredMessage="Campo 'CNPJ' obrigatório."/>
				</h:panelGrid>
				
				<h:panelGrid columns="2">
					<p:commandButton icon="ui-icon-check" value="Salvar" 
						actionListener="#{usuarioPessoaBean.pegarInstituicao}" update=":mensagem :formInst:panelInst"/>
					<p:commandButton icon="ui-icon-close" value="Sair" oncomplete="PF('dialogo').hide();"/>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
	</ui:define>
	
</ui:composition>